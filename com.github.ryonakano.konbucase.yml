app-id: com.github.ryonakano.konbucase
runtime: org.gnome.Platform
runtime-version: '45'
sdk: org.gnome.Sdk
command: com.github.ryonakano.konbucase
finish-args:
  - '--share=ipc'
  - '--socket=wayland'
  - '--socket=fallback-x11'
  - '--device=dri'
modules:
  - name: chcase
    buildsystem: meson
    sources:
      - type: archive
        url: https://github.com/ryonakano/chcase/archive/refs/tags/2.2.0.tar.gz
        sha256: a27c36c5b257fcfb1279c5128cf213b941b2cb76cfba9646b9d819fc369b6297

  - name: ryokucha
    buildsystem: meson
    sources:
      - type: archive
        url: https://github.com/ryonakano/ryokucha/archive/refs/tags/0.1.0.tar.gz
        sha256: 89b9492b33498f46c4f4dd79ef3cbf526069a5422439766382ffdcd0ba1da159

  - name: granite
    buildsystem: meson
    sources:
      - type: archive
        url: https://github.com/elementary/granite/archive/refs/tags/7.3.0.tar.gz
        sha256: 83c517ed9e56689a7279a75406cbf94a135a301739e655bfcc23dafa1087ef5e
    modules:
      - name: sassc
        cleanup:
          - '*'
        buildsystem: autotools
        sources:
          - type: archive
            url: https://github.com/sass/sassc/archive/refs/tags/3.6.2.tar.gz
            sha256: 608dc9002b45a91d11ed59e352469ecc05e4f58fc1259fc9a9f5b8f0f8348a03
          - type: script
            dest-filename: autogen.sh
            commands:
              - autoreconf -si
        modules:
          - name: libsass
            cleanup:
              - '*'
            buildsystem: autotools
            sources:
              - type: archive
                url: https://github.com/sass/libsass/archive/refs/tags/3.6.5.tar.gz
                sha256: 89d8f2c46ae2b1b826b58ce7dde966a176bac41975b82e84ad46b01a55080582
              - type: script
                dest-filename: autogen.sh
                commands:
                  - autoreconf -si

  - name: konbucase
    buildsystem: meson
    config-opts:
      - '-Duse_submodule=false'
    sources:
      #      - type: archive
      #        url: https://github.com/ryonakano/konbucase/archive/refs/tags/4.1.0.tar.gz
      #        sha256: bc6e84f5786ed74629f55d3cb9f9c097a08aa568ed817516e9c86903b03e5a6d
      - type: git
        url: https://github.com/ryonakano/konbucase.git
        commit: c41cbfc8ddbf9b72fea42452bd7f6422ae74b8bd
      - type: patch
        path: 0001-Metainfo-Use-screenshots-taken-on-GNOME.patch
